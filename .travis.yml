language: objective-c

branches:
  only:
  - master

os: osx

rvm:
- 2.2

cache:
  directories:
  - ./Unity

before_install:
- chmod a+x ./Travis/install.sh
- chmod a+x ./Travis/build.sh
- chmod a+x ./Travis/tag.sh
- chmod a+x ./Travis/unity_test_parser.sh

install:
- ./Travis/install.sh

script:
- ./Travis/build.sh

after_success:
- ./Travis/tag.sh

deploy:
- provider: releases
  api_key: 7c01d71ab9050c309e40ed1de7ccf11069ec72cd
  file: 
  - ./Users/travis/build/kernerdev/travis-ci-test-with-unity/unity_branch/travis-ci-test-with-unity/Build/windows.zip
  name: $TRAVIS_BRANCH $(date +'%Y.%m.%d %H:%M')
  skip_cleanup: true
  on:
    all_branches: true
